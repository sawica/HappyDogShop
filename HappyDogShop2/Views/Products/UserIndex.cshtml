@using System.Collections
@using HappyDogShop2.Models
@model IEnumerable<HappyDogShop2.Models.Product>

@{
    ViewBag.Title = "UserIndex";
    Layout = "_ProductLayout.cshtml";
    ViewBag.NewProducts = Model.OrderByDescending(product => product.ProductId).Take(10).ToList();
    
}

<h4>Produkty:</h4>
@* $1$ slider #1# *@
@* <div style=" margin: 20px auto; display: flex; justify-content: center" >  *@
@*     <div class="mySlides sawislider"> *@
@*         <img src="https://lillypetshop.pl/950-thickbox_default/royal-nap-legowisko-dla-sredniego-i-duzego-psa-silver-grey.jpg" style="height: 350px"> *@
@*         <img src="https://lillypetshop.pl/1076-big_default/organiczna-pilka-rainbow-green.jpg" style="height: 350px "> *@
@*     </div> *@
@* *@
@*     <div class="mySlides sawislider"> *@
@*         <img src="https://lillypetshop.pl/1076-big_default/organiczna-pilka-rainbow-green.jpg" style="height: 350px "> *@
@*         <img src="https://lillypetshop.pl/950-thickbox_default/royal-nap-legowisko-dla-sredniego-i-duzego-psa-silver-grey.jpg" style="height: 350px"> *@
@*     </div> *@
@* *@
@* <div class="mySlides sawislider"> *@
@*     <img src="https://lillypetshop.pl/1072-thickbox_default/dreamy-mata-podrozna-dla-psa-lub-kota-grey.jpg" style="height: 350px"> *@
@*     <img src="https://lillypetshop.pl/950-thickbox_default/royal-nap-legowisko-dla-sredniego-i-duzego-psa-silver-grey.jpg" style="height: 350px"> *@
@* </div> *@
@* *@
@* </div> *@
@* <script> *@
@* var slideIndex = 0; *@
@* showSlides(); *@
@* *@
@* function showSlides() { *@
@*   let i; *@
@*   let slides = document.getElementsByClassName("mySlides"); *@
@*   for (i = 0; i < slides.length; i++) { *@
@*     slides[i].style.display = "none";   *@
@*   } *@
@*   slideIndex++; *@
@*   if (slideIndex > slides.length) {slideIndex = 1}     *@
@*   slides[slideIndex-1].style.display = "block";   *@
@*   setTimeout(showSlides, 2000); // Change image every 2 seconds *@
@* } *@
@* </script> *@
@* $1$ koniec slidera #1# *@
@section leftMenu
{
    <div style="width: 80%; margin: 50px auto ; background-color: #f7e6cf; padding: 20px">
        @* <h2>wszystko</h2> *@
        <h2>@Html.ActionLink("wszystko", "UserIndex", new { categoryId = -1 })</h2>
        @* <h2>nowości</h2> *@
        <h2>@Html.ActionLink("nowości", "UserIndex", new { categoryId = -2 })</h2>
        @* <h2>@Html.ActionLink("nowości", "UserIndex", new { id = Model.ProductId } }, "")</h2> *@
        @* @foreach(var product in ViewBag.NewProducts) *@
        @* { *@
        @*     <h3 style="color: #1b6d85"> @product.Name</h3> *@
        @* } *@
        @* <h2>promocje</h2> *@
        <h2>@Html.ActionLink("promocje", "UserIndex", new { categoryId = -3 })</h2>
        @* @foreach(var product in Model) *@
        @* { *@
        @*     if (product.SaleId != null && product.Sale.StartDate <= @DateTime.Now && product.Sale.EndDate >= @DateTime.Now) *@
        @*     { *@
        @*         <h3 style="color: #1b6d85"> @product.Name</h3> *@
        @*     } *@
        @* } *@
        <h2>kategorie</h2>
        @foreach (var c in (IEnumerable<Category>)ViewData["categories"])
        {
        if (c.Parent == null && c.IsHidden == false)
        {
            <h2>@Html.ActionLink(@c.Name, "UserIndex", new { categoryId = c.CategoryId })</h2>
           foreach (var item in (IEnumerable<Category>) ViewData["categories"])
           {
               if (c.CategoryId == item.ParentId && item.IsHidden == false)
               {
               <h3 style="color: #1b6d85"> > @Html.ActionLink(@item.Name, "UserIndex", new { categoryId = item.CategoryId })</h3>
               foreach (var item2 in (IEnumerable<Category>) ViewData["categories"])
               {
                   if (item.CategoryId == item2.ParentId && item2.IsHidden == false)
                   {
                       <h4 style="color: #e43e86">  > @Html.ActionLink(@item2.Name, "UserIndex", new { categoryId = item2.CategoryId })</h4>
                       foreach (var item3 in (IEnumerable<Category>) ViewData["categories"])
                       {
                           if (item2.CategoryId == item3.ParentId && item3.IsHidden == false)
                           {
                               <h5 style="color: #3c3c3c">   > @Html.ActionLink(@item3.Name, "UserIndex", new { categoryId = item3.CategoryId })</h5>
                           }
                       }
                   }
               }
               }
           }
        }
    }
        
    </div>
}
@section productList {

    <div style="width: 70%; margin: 50px 0 auto auto; display: grid; grid-template-columns: 250px 250px 250px;
                                             grid-template-rows: 400px; 
                                             column-gap: 10px;
                                             row-gap: 15px; justify-items: center">
        @foreach (var item in Model)
        {
            if (item.IsHidden == false && item.Category.IsHidden == false )
            {
                <div style="text-align: center; padding: 10px">
                    <h2>
                        @item.Name
                    </h2>
                    @foreach (var media in (IEnumerable<MediaType>) ViewData["media"])
                    {
                        if (@item.MediaTypeId == media.MediaTypeId)
                        {
                            <img style="height: 150px" src="@media.ImagePath"/>
                        }
                    }
                
                    <h3>
                        cena: @item.Price
                    </h3>
       
                    <input type="submit" value="Dodaj do koszyka" class="btn btn-default" style=" border-color: #e43e86" onclick=""/>
                    <button class="btn btn-default" style=" border-color: #e43e86">@Html.ActionLink("Dodaj do koszyka", "Create", "CartItem", new { Quantity = 1,ProductId = item.ProductId,OrderID = @Session["orderID"]}, new {})</button>
                </div>
            }
        }
    </div>
}

       

